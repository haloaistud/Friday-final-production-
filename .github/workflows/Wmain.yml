name: Generate SLSA Provenance (Attest Build)

on:
  workflow_dispatch:
  release:
    types: [created]

jobs:
  build:
    runs-on: ubuntu-latest

    permissions:
      id-token: write        # Required for signing
      contents: write        # If uploading to release

    steps:
      - uses: actions/checkout@v4

      - name: Build artifacts
        run: |
          # Replace with your real build commands
          echo "artifact1" > artifact1.txt
          echo "artifact2" > artifact2.txt

      - name: Attest build provenance
        uses: actions/attest-build-provenance@v2  # or @v1 â€” check latest
        with:
          subject-path: 'artifact*.txt'   # glob or list your files here
          # Optional: push-to-registry: false   # default
